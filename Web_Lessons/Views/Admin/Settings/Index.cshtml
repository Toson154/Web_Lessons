@model Web_Lessons.ViewModels.SystemSettingsViewModel
@{
    Layout = "_AdminLayout";
    ViewData["Title"] = "System Settings";
    ViewData["Description"] = "Configure system preferences and options";
}

<div class="row">
    <!-- Main Settings -->
    <div class="col-lg-8">
        <div class="content-card">
            <h5 class="mb-4">General Settings</h5>

            <form asp-action="Settings" method="post">
                @Html.AntiForgeryToken()

                <!-- Site Information -->
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h6 class="mb-0">Site Information</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="SiteName" class="form-label">Site Name *</label>
                                <input asp-for="SiteName" class="form-control" />
                                <span asp-validation-for="SiteName" class="text-danger small"></span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label asp-for="SiteEmail" class="form-label">Site Email *</label>
                                <input asp-for="SiteEmail" class="form-control" />
                                <span asp-validation-for="SiteEmail" class="text-danger small"></span>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Contact Email</label>
                                <input asp-for="ContactEmail" class="form-control" placeholder="contact@example.com" />
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Contact Phone</label>
                                <input asp-for="ContactPhone" class="form-control" placeholder="+1234567890" />
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Address</label>
                            <textarea asp-for="Address" class="form-control" rows="3"
                                      placeholder="Enter physical address..."></textarea>
                        </div>
                    </div>
                </div>

                <!-- Registration Settings -->
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h6 class="mb-0">Registration & Security</h6>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <div class="form-check form-switch">
                                <input asp-for="AllowRegistrations" class="form-check-input" type="checkbox"
                                       id="allowRegistrations" />
                                <label class="form-check-label" for="allowRegistrations">
                                    Allow new user registrations
                                </label>
                            </div>
                            <small class="form-text text-muted">
                                When disabled, only admins can create new accounts
                            </small>
                        </div>

                        <div class="mb-3">
                            <div class="form-check form-switch">
                                <input asp-for="RequireEmailConfirmation" class="form-check-input" type="checkbox"
                                       id="requireEmailConfirmation" />
                                <label class="form-check-label" for="requireEmailConfirmation">
                                    Require email confirmation
                                </label>
                            </div>
                            <small class="form-text text-muted">
                                Users must confirm their email before accessing the platform
                            </small>
                        </div>
                    </div>
                </div>

                <!-- File Upload Settings -->
                <div class="card mb-4">
                    <div class="card-header bg-light">
                        <h6 class="mb-0">File Upload Settings</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label asp-for="MaxFileSizeMB" class="form-label">Max File Size (MB)</label>
                                <input asp-for="MaxFileSizeMB" class="form-control" type="number" min="1" max="1000" />
                                <span asp-validation-for="MaxFileSizeMB" class="text-danger small"></span>
                                <small class="form-text text-muted">
                                    Maximum file size for video and PDF uploads
                                </small>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label asp-for="AllowedFileTypes" class="form-label">Allowed File Types</label>
                                <input asp-for="AllowedFileTypes" class="form-control"
                                       placeholder=".mp4,.mov,.avi,.pdf,.docx" />
                                <small class="form-text text-muted">
                                    Comma-separated list of allowed file extensions
                                </small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Maintenance Mode -->
                <div class="card mb-4 border-warning">
                    <div class="card-header bg-warning">
                        <h6 class="mb-0">Maintenance Mode</h6>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-warning">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            <strong>Warning:</strong> Maintenance mode will restrict access to all non-admin users.
                        </div>

                        <div class="mb-3">
                            <div class="form-check form-switch">
                                <input class="form-check-input" type="checkbox" id="maintenanceMode" />
                                <label class="form-check-label" for="maintenanceMode">
                                    Enable Maintenance Mode
                                </label>
                            </div>
                            <small class="form-text text-muted">
                                When enabled, only administrators can access the site
                            </small>
                        </div>

                        <div class="mb-3" id="maintenanceMessage" style="display: none;">
                            <label class="form-label">Maintenance Message</label>
                            <textarea class="form-control" rows="3"
                                      placeholder="Enter message to display during maintenance..."></textarea>
                        </div>
                    </div>
                </div>

                <!-- Form Actions -->
                <div class="d-flex justify-content-between">
                    <button type="button" class="btn btn-outline-secondary" id="resetBtn">
                        <i class="fas fa-undo me-2"></i>Reset to Defaults
                    </button>
                    <div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save me-2"></i>Save Settings
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Sidebar Actions -->
    <div class="col-lg-4">
        <!-- Quick Actions -->
        <div class="content-card mb-4">
            <h5 class="mb-3">Quick Actions</h5>
            <div class="list-group list-group-flush">
                <button class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                    <div>
                        <i class="fas fa-database text-primary me-2"></i>
                        <span>Clear Cache</span>
                    </div>
                    <i class="fas fa-chevron-right"></i>
                </button>
                <button class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                    <div>
                        <i class="fas fa-backup text-success me-2"></i>
                        <span>Backup Database</span>
                    </div>
                    <i class="fas fa-chevron-right"></i>
                </button>
                <button class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                    <div>
                        <i class="fas fa-sync text-warning me-2"></i>
                        <span>Update System</span>
                    </div>
                    <i class="fas fa-chevron-right"></i>
                </button>
                <button class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                    <div>
                        <i class="fas fa-file-export text-info me-2"></i>
                        <span>Export Settings</span>
                    </div>
                    <i class="fas fa-chevron-right"></i>
                </button>
            </div>
        </div>

        <!-- System Info -->
        <div class="content-card">
            <h5 class="mb-3">System Information</h5>

            <div class="mb-3">
                <small class="text-muted d-block">Platform Version</small>
                <h6>v2.1.0</h6>
            </div>

            <div class="mb-3">
                <small class="text-muted d-block">Database Size</small>
                <h6>45.2 MB</h6>
            </div>

            <div class="mb-3">
                <small class="text-muted d-block">Server Time</small>
                <h6>@DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss")</h6>
            </div>

            <div class="mb-3">
                <small class="text-muted d-block">Environment</small>
                <h6>
                    <span class="badge bg-success">Production</span>
                </h6>
            </div>

            <hr>

            <div class="text-center">
                <button class="btn btn-outline-primary btn-sm me-2">
                    <i class="fas fa-redo me-1"></i> Check Updates
                </button>
                <button class="btn btn-outline-success btn-sm">
                    <i class="fas fa-shield-alt me-1"></i> Security Scan
                </button>
            </div>
        </div>

        <!-- Support -->
        <div class="content-card mt-4">
            <h5 class="mb-3">Support</h5>
            <div class="text-center">
                <i class="fas fa-life-ring fa-3x text-primary mb-3"></i>
                <p class="text-muted small mb-3">
                    Need help with system settings?
                </p>
                <a href="#" class="btn btn-outline-primary btn-sm me-2">
                    <i class="fas fa-book me-1"></i> Documentation
                </a>
                <a href="#" class="btn btn-outline-success btn-sm">
                    <i class="fas fa-headset me-1"></i> Contact Support
                </a>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }

    <script>
        $(document).ready(function () {
            // Maintenance mode toggle
            $('#maintenanceMode').on('change', function () {
                if ($(this).is(':checked')) {
                    $('#maintenanceMessage').slideDown();
                } else {
                    $('#maintenanceMessage').slideUp();
                }
            });

            // Reset to defaults
            $('#resetBtn').on('click', function () {
                if (confirm('Reset all settings to default values?')) {
                    $('form')[0].reset();
                    $('#maintenanceMessage').hide();
                }
            });

            // Show current settings values
            console.log('Current Settings:', {
                siteName: '@Model.SiteName',
                allowRegistrations: @Model.AllowRegistrations.ToString().ToLower(),
                maxFileSize: @Model.MaxFileSizeMB
                    });
        });
    </script>
}